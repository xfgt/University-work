# Типове свързвания

## Полиморфизъм чрез виртуални функции

* Полиморфизъм при класовете би означавало еднакво
именувани и с еднакви сигнатури член-функции да работят
по различен начин в различните класове. 
```cpp
 People* p_ptr = new People();
 p_ptr -> foo();
 p_ptr = new Student();
 p_ptr -> foo();
```

  - Точно това е налице, когато при наследяване се
припокрие (override) член-функция от базов клас.
```cpp
в class People...
 --> virtual void foo() const override {}
```
  - Tова е възможно, когато припокриващата
функция се извика през обект от производния клас или
през указател от базов тип, предварително
преобразуван към указател от производния тип
(downcast). Това преобразуване обаче се изпълняваше
по време на компилация, т.е. __статично__.
* При полиморфните контейнери достъпът до всички обекти е
  през указател oт типа на базовия клас. ```People*```

<hr>

## Късно свързване

* За всеки клас компилаторът изгражда таблица от указатели към
неговите член-функции, която използва при извикването им. ```vtable```
* Адресите на виртуалните член-функции за всеки клас са
oрганизирани oтделни таблици, а извикването на такава
функция компилаторът организира следните действия:
  - извличане на адреса на таблицата от тялото на обекта (по
време на изпълнение);
  - намиране на входната точка на член-функцията (името й е
преобразувано в отместване в таблицата);
  - стартиране на функцията, като й се предава адресът на
обекта (указател ```this```).
* Вижда се, че този начин на извикване не зависи от типа на
указателя към oбекта (може да е и от базов тип).

<hr>

## Динамично и статично свързване
* Когато се извиква една виртуална функция, точната
функция, която трябва да се изпълнява се определя по
време на изпълнение на програмата.
* Механизмът, по който се прави този избор се нарича
динамично свързване.

<hr>

* Когато едно извикване води винаги до изпълнение на една
и съща функция се нарича Статично свързване.
* Само член-функциите могат да са виртуални.
* Член-функция, която не е обявена като виртуална в базов
клас се свързва статично.